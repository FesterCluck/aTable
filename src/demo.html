<!DOCTYPE html>
<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <title>Table Demo</title>
    <link rel="stylesheet" type="text/css" href="css/atable.css">
    <link rel="stylesheet" type="text/css" href="css/demo.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <script type="text/javascript" src="lib/jquery.js"></script>
    <script type="text/javascript" src="lib/underscore.js"></script>
    <script type="text/javascript" src="lib/backbone.js"></script>
    <script type="text/javascript" src="../dist/atable.js"></script>
    <script type="text/javascript" src="demo.js"></script>
    <script type="text/javascript" id="fetchStockData">
        function fetchStockData() {
            var url = "http://download.finance.yahoo.com/d/quotes.csv?s=AAPL,MSFT,FB,GOOG,SIRI&f=snpoban4&e=.csv";
            sendRequest(url);
            var interval = setInterval(function () {
                sendRequest(url);
            }, 3000);
        }

        function sendRequest(url) {
            var ajax = new XMLHttpRequest();
            ajax.onload = function () {
                var rows = [];
                var resp = ajax.responseText;
                var result = resp.split('\n');
                for (var i = 0; i < result.length; i++) {
                    var fields = result[i].split(',');
                    rows.push(fields);
                }
                self.postMessage({data : rows});
            };
            ajax.open("GET", url, true);
            ajax.responseType = "text";
            ajax.send();
        }
    </script>
</head>
<body>
<div class="row">
    <div class="span4 offset4" id="staticData10Rows"></div>
</div>
<div class="row">
    <div class="span4 offset4" id="dynamicAjax"></div>
</div>
</body>
</html>